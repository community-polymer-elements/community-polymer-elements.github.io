<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../neon-animation/neon-animated-pages.html">
<link rel="import" href="../neon-animation/animations/fade-in-animation.html">
<link rel="import" href="../neon-animation/animations/fade-out-animation.html">
<link rel="import" href="detect-import-node-bug.html">
<link rel="import" href="cosmoz-page-route.html">

<!--
`<cosmoz-page-router>` is a template based client-side routing solution

### Usage

Make sure the `<cosmoz-page-router>` element takes up all the space the views will use.

    <cosmoz-page-router class="fit">
      <cosmoz-page-route path="/" template-id="start" import="views/start.html">
      </cosmoz-page-route>
    </cosmoz-page-router>

#### Views

    <template id="start" is="dom-bind">
      <h2>Welcome to the start page</h2>
      <div>{{ boundValue }}</div>
    </template>

    <script type="text/javascript">
      Cosmoz.TemplateView['start'] = {
        properties: {
          boundValue: {
            type: String,
            value: 'bound'
          }
        },
        ready: function () {
          console.log('template loaded!');
        }
      };
    </script>

`Cosmoz.TemplateView` is an object that will link the template with ID `start` to this Polymer object named `start`.

The object itself will be mixed in like any other custom element / template.

The template has `is="dom-bind"` to hand over the stamping, listeners, bindings and other to Polymer once inserted.

For ad-hoc routing, `url-prefix` + `url` + `file-suffix` will be used to find the template file. The template id will be the url path with slashes (/) replaced with dashes (-), `users/list/all` -> `users-list-all`.

### View events

Fired on the template

#### `attached`

Fired by Polymer, do not override in view.

#### `ready`

Fired by Polymer.

A good time to do any setup if needed for the view.

#### `template-activate`

Will be fired for newly imported templates when Polymer fires the `dom-change` event.

Will otherwise be fired when activated for persisted views.

@group Cosmoz Elements
@element cosmoz-page-router
@demo demo/index.html
-->

<dom-module id="cosmoz-page-router">
	<template>
		<neon-animated-pages
				id="routes"
				class="fit"
				attr-for-selected="path"
				on-neon-animation-finish="_onNeonAnimationFinish">
			<content></content>
		</neon-animated-pages>
	</template>

</dom-module>

<script type="text/javascript" src="cosmoz-page-router-behavior-utilities.js"></script>
<script type="text/javascript" src="cosmoz-template-view.js"></script>
<script type="text/javascript" src="cosmoz-page-router.js"></script>